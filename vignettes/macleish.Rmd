---
title: "Using the Macleish Weather Data"
author: "Rose Goueth"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using Macleish Weather Data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

Vignettes are long form documentation commonly included in packages. Because they are part of the distribution of the package, they need to be as compact as possible. The `html_vignette` output type provides a custom style sheet (and tweaks some options) to ensure that the resulting html is as small as possible. The `html_vignette` format:

- Never uses retina figures
- Has a smaller default figure size
- Uses a custom CSS stylesheet instead of the default Twitter Bootstrap style

## Vignette Info

Note the various macros within the `vignette` section of the metadata block above. These are required in order to instruct R how to build the vignette. Note that you should change the `title` field and the `\VignetteIndexEntry` to match the title of your vignette.

## Styles

The `html_vignette` template includes a basic CSS theme. To override this theme you can specify your own CSS in the document metadata as follows:

    output: 
      rmarkdown::html_vignette:
        css: mystyles.css

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))


## Using the Macleish Weather Data

```{r}
require(macleish)
head(whately)
```
In order to use the data from the Machleish weather towers, you must import the data set(s). The name of the data set corresponds to its tower. Note that the data set imported is using averages over 10 minutes. If you are calculating or plotting anything, remember this note.

Using plots can help you see your data visually. This is a good tool, especially if you want to find anomolies within the data. 

For example, the total Rainfall measurement may be off because someone bumped into the instrument, or because it could have shut off by itself. So graphing this column of data would be of best interest. To do so, use the code below to plot your data.

Make a time series plot

```{r, fig.width = 9, fig.height = 5, message=FALSE}
require(mosaic)
xyplot(Temp_C_Avg ~ when, data = whately, type = "l")
```

If you want to compute averages other than the 10 minute one, you can do so using simple math ! The example below shows you how to compute daily averages. 

CAUTION: If you would rather use the daily data set, you may do so, but it will take you longer to make sure you are getting the right results. If you are a novice at R, I would adivse you to compute the daily averages with simple math.

Compute Daily averages

```{r}
daily <- whately %>%
  group_by(when) %>%
  summarize(N = n(), avgTemp = mean(Temp_C_Avg))
xyplot(avgTemp ~ when, data = daily, type = c("l", "smooth", "r"))
```
